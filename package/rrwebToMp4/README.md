# rrweb-to-mp4

å°† rrweb å½•åˆ¶æ•°æ®è½¬æ¢ä¸ºè§†é¢‘æ–‡ä»¶ï¼ˆWebM æ ¼å¼ï¼‰

## âœ… å·²ä¿®å¤ macOS å…¼å®¹æ€§

- âœ… æ”¯æŒ Apple Silicon (M1/M2/M3)
- âœ… Puppeteer 13.7.0+
- âœ… è‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿ Chrome
- âœ… WebM è¾“å‡ºï¼ˆç¨³å®šå¯é ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œæµ‹è¯•
npm test
```

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Node.js 18+
- Google Chrome (macOS ä¼šè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿå®‰è£…çš„ Chrome)

## ğŸ¬ å·¥ä½œåŸç†

1. Puppeteer å¯åŠ¨æ— å¤´ Chrome
2. å›æ”¾ rrweb å½•åˆ¶çš„äº‹ä»¶
3. é€å¸§æˆªå›¾
4. ä½¿ç”¨ WebM Writer ç”Ÿæˆè§†é¢‘
5. ä¿å­˜åˆ° `public/upload/webm/`

## âš™ï¸ é…ç½®

è§†é¢‘å‚æ•°åœ¨ `replay.html` ä¸­é…ç½®ï¼š

```javascript
let config = {
  fps: 50  // å¸§ç‡ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´ (30-60 æ¨è)
};
```

## ğŸ“¦ è¾“å‡ºæ ¼å¼

- **è§†é¢‘æ ¼å¼**: WebM (æ ‡å‡†æ ¼å¼ï¼Œæ‰€æœ‰ç°ä»£æµè§ˆå™¨æ”¯æŒ)
- **è¾“å‡ºè·¯å¾„**: `public/upload/webm/*.webm`

## ğŸ”§ å‡çº§è¯´æ˜

### ä» Puppeteer 5.5 å‡çº§

å¦‚æœä¹‹å‰ä½¿ç”¨ Puppeteer 5.5.0ï¼š

1. å·²å‡çº§åˆ° 13.7.0 (æ”¯æŒ ARM64)
2. å·²ç§»é™¤ä¸å…¼å®¹çš„ Chrome å‚æ•°
3. å·²åˆ‡æ¢åˆ°ç¨³å®šçš„ WebM ç¼–ç å™¨

### ä¸ºä»€ä¹ˆä½¿ç”¨ WebM è€Œä¸æ˜¯ MP4ï¼Ÿ

- WebM Writer çº¯ JavaScript å®ç°ï¼Œæ›´ç¨³å®š
- H264 WASM ç¼–ç å™¨åœ¨æ— å¤´ Chrome ä¸­ä¸ç¨³å®š
- WebM æ˜¯å¼€æ”¾æ ‡å‡†ï¼Œæ‰€æœ‰æµè§ˆå™¨æ”¯æŒ
- å¦‚éœ€ MP4ï¼Œå¯ä½¿ç”¨ ffmpeg åç«¯è½¬æ¢

## ğŸ“š æ›´å¤šä¿¡æ¯

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [PROJECT_INFO.md](./PROJECT_INFO.md)

## ğŸ› æ•…éšœæ’é™¤

### Chrome å¯åŠ¨å¤±è´¥

ç¡®ä¿å·²å®‰è£… Google Chrome:
```bash
ls -la "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome"
```

### npm æƒé™é—®é¢˜

ä½¿ç”¨ä¸´æ—¶ç¼“å­˜ç›®å½•:
```bash
npm install --cache /tmp/npm-cache --prefer-online
```

## ğŸ“ ç‰ˆæœ¬å†å²

- **v1.0.0**: åŸºç¡€åŠŸèƒ½ï¼ŒPuppeteer 5.5.0
- **v1.0.1**: å‡çº§ Puppeteer 13.7.0ï¼Œæ”¯æŒ ARM64
- **v1.0.2**: åˆ‡æ¢åˆ° WebM ç¼–ç å™¨ï¼Œæé«˜ç¨³å®šæ€§
